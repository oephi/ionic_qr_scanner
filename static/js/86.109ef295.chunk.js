(this["webpackJsonpphoto-gallery-capacitor-react"]=this["webpackJsonpphoto-gallery-capacitor-react"]||[]).push([[86],{181:function(e,t,r){"use strict";r.r(t),r.d(t,"CameraWeb",(function(){return d})),r.d(t,"Camera",(function(){return m}));var a=r(1),n=r.n(a),c=r(3),i=r(5),o=r(6),u=r(7),s=r(8),p=r(27),l=r(53),d=function(e){Object(u.a)(r,e);var t=Object(s.a)(r);function r(){return Object(i.a)(this,r),t.apply(this,arguments)}return Object(o.a)(r,[{key:"getPhoto",value:function(){var e=Object(c.a)(n.a.mark((function e(t){var r=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(c.a)(n.a.mark((function e(a,i){var o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.webUseInput||t.source===l.c.Photos?r.fileInputExperience(t,a):t.source===l.c.Prompt?((o=document.querySelector("pwa-action-sheet"))||(o=document.createElement("pwa-action-sheet"),document.body.appendChild(o)),o.header=t.promptLabelHeader||"Photo",o.cancelable=!1,o.options=[{title:t.promptLabelPhoto||"From Photos"},{title:t.promptLabelPicture||"Take Picture"}],o.addEventListener("onSelection",function(){var e=Object(c.a)(n.a.mark((function e(c){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0===c.detail?r.fileInputExperience(t,a):r.cameraExperience(t,a,i);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):r.cameraExperience(t,a,i);case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"pickImages",value:function(){var e=Object(c.a)(n.a.mark((function e(t){var r=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(c.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.multipleFileInputExperience(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"cameraExperience",value:function(){var e=Object(c.a)(n.a.mark((function e(t,r,a){var i,o=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!customElements.get("pwa-camera-modal")){e.next=16;break}return(i=document.createElement("pwa-camera-modal")).facingMode=t.direction===l.a.Front?"user":"environment",document.body.appendChild(i),e.prev=4,e.next=7,i.componentOnReady();case 7:i.addEventListener("onPhoto",function(){var e=Object(c.a)(n.a.mark((function e(c){var u;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(u=c.detail)){e.next=5;break}a(new p.b("User cancelled photos app")),e.next=14;break;case 5:if(!(u instanceof Error)){e.next=9;break}a(u),e.next=14;break;case 9:return e.t0=r,e.next=12,o._getCameraPhoto(u,t);case 12:e.t1=e.sent,(0,e.t0)(e.t1);case 14:i.dismiss(),document.body.removeChild(i);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i.present(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),this.fileInputExperience(t,r);case 14:e.next=18;break;case 16:console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/pwa-elements."),this.fileInputExperience(t,r);case 18:case"end":return e.stop()}}),e,this,[[4,11]])})));return function(t,r,a){return e.apply(this,arguments)}}()},{key:"fileInputExperience",value:function(e,t){var r=document.querySelector("#_capacitor-camera-input"),a=function(){var e;null===(e=r.parentNode)||void 0===e||e.removeChild(r)};r||((r=document.createElement("input")).id="_capacitor-camera-input",r.type="file",r.hidden=!0,document.body.appendChild(r),r.addEventListener("change",(function(n){var c=r.files[0],i="jpeg";if("image/png"===c.type?i="png":"image/gif"===c.type&&(i="gif"),"dataUrl"===e.resultType||"base64"===e.resultType){var o=new FileReader;o.addEventListener("load",(function(){if("dataUrl"===e.resultType)t({dataUrl:o.result,format:i});else if("base64"===e.resultType){var r=o.result.split(",")[1];t({base64String:r,format:i})}a()})),o.readAsDataURL(c)}else t({webPath:URL.createObjectURL(c),format:i}),a()}))),r.accept="image/*",r.capture=!0,e.source===l.c.Photos||e.source===l.c.Prompt?r.removeAttribute("capture"):e.direction===l.a.Front?r.capture="user":e.direction===l.a.Rear&&(r.capture="environment"),r.click()}},{key:"multipleFileInputExperience",value:function(e){var t=document.querySelector("#_capacitor-camera-input-multiple");t||((t=document.createElement("input")).id="_capacitor-camera-input-multiple",t.type="file",t.hidden=!0,t.multiple=!0,document.body.appendChild(t),t.addEventListener("change",(function(r){for(var a=[],n=0;n<t.files.length;n++){var c=t.files[n],i="jpeg";"image/png"===c.type?i="png":"image/gif"===c.type&&(i="gif"),a.push({webPath:URL.createObjectURL(c),format:i})}e({photos:a}),function(){var e;null===(e=t.parentNode)||void 0===e||e.removeChild(t)}()}))),t.accept="image/*",t.click()}},{key:"_getCameraPhoto",value:function(e,t){return new Promise((function(r,a){var n=new FileReader,c=e.type.split("/")[1];"uri"===t.resultType?r({webPath:URL.createObjectURL(e),format:c,saved:!1}):(n.readAsDataURL(e),n.onloadend=function(){var e=n.result;"dataUrl"===t.resultType?r({dataUrl:e,format:c,saved:!1}):r({base64String:e.split(",")[1],format:c,saved:!1})},n.onerror=function(e){a(e)})}))}},{key:"checkPermissions",value:function(){var e=Object(c.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof navigator&&navigator.permissions){e.next=2;break}throw this.unavailable("Permissions API not available in this browser");case 2:return e.prev=2,e.next=5,window.navigator.permissions.query({name:"camera"});case 5:return t=e.sent,e.abrupt("return",{camera:t.state,photos:"granted"});case 9:throw e.prev=9,e.t0=e.catch(2),this.unavailable("Camera permissions are not available in this browser");case 12:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"requestPermissions",value:function(){var e=Object(c.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw this.unimplemented("Not implemented on web.");case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(p.c),m=new d}}]);
//# sourceMappingURL=86.109ef295.chunk.js.map